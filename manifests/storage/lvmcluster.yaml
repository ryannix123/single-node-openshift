# LVMCluster Configuration
# Prerequisites:
#   1. LVM Operator must be installed (see lvm-operator.yaml)
#   2. Storage drive must be clean (no partitions, LVM metadata, or filesystems)
#      Run: scripts/wipe-storage-drive.sh /dev/nvme0n1
#
# Apply with: oc apply -f lvmcluster.yaml
# Wait with:  oc wait --for=condition=Ready lvmcluster/my-lvmcluster -n openshift-lvm-storage --timeout=300s
---
apiVersion: lvm.topolvm.io/v1alpha1
kind: LVMCluster
metadata:
  name: my-lvmcluster
  namespace: openshift-lvm-storage
spec:
  storage:
    deviceClasses:
    - name: vg1
      # Specify your storage device path
      # Use 'lsblk' to identify available drives
      deviceSelector:
        paths:
        - /dev/nvme0n1
      thinPoolConfig:
        name: thin-pool-1
        sizePercent: 90
        overprovisionRatio: 10

# After applying, set as default StorageClass:
# oc patch storageclass lvms-vg1 -p '{"metadata":{"annotations":{"storageclass.kubernetes.io/is-default-class":"true"}}}'
